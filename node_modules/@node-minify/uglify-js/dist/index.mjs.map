{"version":3,"sources":["../src/index.ts"],"sourcesContent":["/*!\n * node-minify\n * Copyright(c) 2011-2023 Rodolphe Stoclin\n * MIT Licensed\n */\n\n/**\n * Module dependencies.\n */\nimport uglifyJS from 'uglify-js';\nimport { utils } from '@node-minify/utils';\nimport { MinifierOptions } from '@node-minify/types';\n\n/**\n * Run uglifyJS.\n *\n * @param {Object} settings\n * @param {String} content\n * @param {Function} callback\n * @param {Number} index\n */\nconst minifyUglifyJS = ({ settings, content, callback, index }: MinifierOptions) => {\n  const contentMinified = uglifyJS.minify(content ?? '', settings?.options);\n  if (contentMinified.error) {\n    if (callback) {\n      return callback(contentMinified.error);\n    }\n  }\n  if (contentMinified.map && typeof settings?.options?.sourceMap === 'object') {\n    utils.writeFile({\n      file: typeof settings.options.sourceMap.filename === 'string' ? settings.options.sourceMap.filename : '',\n      content: contentMinified.map,\n      index\n    });\n  }\n  if (settings && !settings.content && settings.output) {\n    utils.writeFile({ file: settings.output, content: contentMinified.code, index });\n  }\n  if (callback) {\n    return callback(null, contentMinified.code);\n  }\n  return contentMinified.code;\n};\n\n/**\n * Expose `minifyUglifyJS()`.\n */\nminifyUglifyJS.default = minifyUglifyJS;\nexport = minifyUglifyJS;\n"],"mappings":";;;;;;AASA,OAAO,cAAc;AACrB,SAAS,aAAa;AAVtB;AAAA;AAqBA,QAAM,iBAAiB,CAAC,EAAE,UAAU,SAAS,UAAU,MAAM,MAAuB;AAClF,YAAM,kBAAkB,SAAS,OAAO,WAAW,IAAI,UAAU,OAAO;AACxE,UAAI,gBAAgB,OAAO;AACzB,YAAI,UAAU;AACZ,iBAAO,SAAS,gBAAgB,KAAK;AAAA,QACvC;AAAA,MACF;AACA,UAAI,gBAAgB,OAAO,OAAO,UAAU,SAAS,cAAc,UAAU;AAC3E,cAAM,UAAU;AAAA,UACd,MAAM,OAAO,SAAS,QAAQ,UAAU,aAAa,WAAW,SAAS,QAAQ,UAAU,WAAW;AAAA,UACtG,SAAS,gBAAgB;AAAA,UACzB;AAAA,QACF,CAAC;AAAA,MACH;AACA,UAAI,YAAY,CAAC,SAAS,WAAW,SAAS,QAAQ;AACpD,cAAM,UAAU,EAAE,MAAM,SAAS,QAAQ,SAAS,gBAAgB,MAAM,MAAM,CAAC;AAAA,MACjF;AACA,UAAI,UAAU;AACZ,eAAO,SAAS,MAAM,gBAAgB,IAAI;AAAA,MAC5C;AACA,aAAO,gBAAgB;AAAA,IACzB;AAKA,mBAAe,UAAU;AACzB,qBAAS;AAAA;AAAA;","names":[]}