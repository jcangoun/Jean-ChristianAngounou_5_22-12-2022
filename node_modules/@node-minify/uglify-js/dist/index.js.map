{"version":3,"sources":["../src/index.ts"],"sourcesContent":["/*!\n * node-minify\n * Copyright(c) 2011-2023 Rodolphe Stoclin\n * MIT Licensed\n */\n\n/**\n * Module dependencies.\n */\nimport uglifyJS from 'uglify-js';\nimport { utils } from '@node-minify/utils';\nimport { MinifierOptions } from '@node-minify/types';\n\n/**\n * Run uglifyJS.\n *\n * @param {Object} settings\n * @param {String} content\n * @param {Function} callback\n * @param {Number} index\n */\nconst minifyUglifyJS = ({ settings, content, callback, index }: MinifierOptions) => {\n  const contentMinified = uglifyJS.minify(content ?? '', settings?.options);\n  if (contentMinified.error) {\n    if (callback) {\n      return callback(contentMinified.error);\n    }\n  }\n  if (contentMinified.map && typeof settings?.options?.sourceMap === 'object') {\n    utils.writeFile({\n      file: typeof settings.options.sourceMap.filename === 'string' ? settings.options.sourceMap.filename : '',\n      content: contentMinified.map,\n      index\n    });\n  }\n  if (settings && !settings.content && settings.output) {\n    utils.writeFile({ file: settings.output, content: contentMinified.code, index });\n  }\n  if (callback) {\n    return callback(null, contentMinified.code);\n  }\n  return contentMinified.code;\n};\n\n/**\n * Expose `minifyUglifyJS()`.\n */\nminifyUglifyJS.default = minifyUglifyJS;\nexport = minifyUglifyJS;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AASA,uBAAqB;AACrB,mBAAsB;AAWtB,IAAM,iBAAiB,CAAC,EAAE,UAAU,SAAS,UAAU,MAAM,MAAuB;AAClF,QAAM,kBAAkB,iBAAAA,QAAS,OAAO,WAAW,IAAI,UAAU,OAAO;AACxE,MAAI,gBAAgB,OAAO;AACzB,QAAI,UAAU;AACZ,aAAO,SAAS,gBAAgB,KAAK;AAAA,IACvC;AAAA,EACF;AACA,MAAI,gBAAgB,OAAO,OAAO,UAAU,SAAS,cAAc,UAAU;AAC3E,uBAAM,UAAU;AAAA,MACd,MAAM,OAAO,SAAS,QAAQ,UAAU,aAAa,WAAW,SAAS,QAAQ,UAAU,WAAW;AAAA,MACtG,SAAS,gBAAgB;AAAA,MACzB;AAAA,IACF,CAAC;AAAA,EACH;AACA,MAAI,YAAY,CAAC,SAAS,WAAW,SAAS,QAAQ;AACpD,uBAAM,UAAU,EAAE,MAAM,SAAS,QAAQ,SAAS,gBAAgB,MAAM,MAAM,CAAC;AAAA,EACjF;AACA,MAAI,UAAU;AACZ,WAAO,SAAS,MAAM,gBAAgB,IAAI;AAAA,EAC5C;AACA,SAAO,gBAAgB;AACzB;AAKA,eAAe,UAAU;AACzB,iBAAS;","names":["uglifyJS"]}