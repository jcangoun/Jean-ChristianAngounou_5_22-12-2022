var __getOwnPropNames = Object.getOwnPropertyNames;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};

// src/index.ts
import uglifyJS from "uglify-js";
import { utils } from "@node-minify/utils";
var require_src = __commonJS({
  "src/index.ts"(exports, module) {
    var minifyUglifyJS = ({ settings, content, callback, index }) => {
      const contentMinified = uglifyJS.minify(content ?? "", settings?.options);
      if (contentMinified.error) {
        if (callback) {
          return callback(contentMinified.error);
        }
      }
      if (contentMinified.map && typeof settings?.options?.sourceMap === "object") {
        utils.writeFile({
          file: typeof settings.options.sourceMap.filename === "string" ? settings.options.sourceMap.filename : "",
          content: contentMinified.map,
          index
        });
      }
      if (settings && !settings.content && settings.output) {
        utils.writeFile({ file: settings.output, content: contentMinified.code, index });
      }
      if (callback) {
        return callback(null, contentMinified.code);
      }
      return contentMinified.code;
    };
    minifyUglifyJS.default = minifyUglifyJS;
    module.exports = minifyUglifyJS;
  }
});
export default require_src();
/*!
 * node-minify
 * Copyright(c) 2011-2023 Rodolphe Stoclin
 * MIT Licensed
 */
//# sourceMappingURL=index.mjs.map